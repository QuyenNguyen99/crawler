{"version":3,"sources":["C:/project/crawlersystem/src/app/application/admin/job/job.component.html","C:/project/crawlersystem/src/app/application/admin/job/job.component.ts","C:/project/crawlersystem/src/app/application/admin/job/job.module.ts"],"names":[],"mappings":"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","file":"job.module.chunk.js","sourcesContent":["module.exports = \"<style>\\r\\n    .table_>thead>tr>th,\\r\\n    .table_>tbody>tr>th,\\r\\n    .table_>tfoot>tr>th,\\r\\n    .table_>thead>tr>td,\\r\\n    .table_>tbody>tr>td,\\r\\n    .table_>tfoot>tr>td,\\r\\n    .table_ tr>td code {\\r\\n        font-size: 10px;\\r\\n        color: white !important;\\r\\n        padding: 3px;\\r\\n        border: none;\\r\\n    }\\r\\n\\r\\n    .table_ {\\r\\n        background-color: #444;\\r\\n        border: none\\r\\n    }\\r\\n\\r\\n    .value {\\r\\n        font-weight: normal;\\r\\n        font-size: 11px;\\r\\n        text-transform: uppercase\\r\\n    }\\r\\n</style>\\r\\n<div class=\\\"customer-list-popup\\\" id=\\\"customer-list-popup\\\" [hidden]=\\\"!role('job_read')\\\">\\r\\n    <div class=\\\"div-admin-form-tab-parent\\\">\\r\\n        <div class=\\\"admin-form-tab\\\">\\r\\n            <div class=\\\"div-admin-form-field-parent\\\">\\r\\n                <div class=\\\"admin-table-to-form col-6-ipad cbs_style_label col-xs-6 col-lg-6\\\" *ngIf=\\\"job\\\"\\r\\n                    style=\\\"border:1px solid #ccc\\\">\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>ID:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.id}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Tên:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.NAME}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Loại Job:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\" *ngIf=\\\"job.JOB_JOB_TYPE_MUL\\\">\\r\\n                            <ng-container *ngFor=\\\"let lg of job.JOB_JOB_TYPE_MUL.split(',')\\\">\\r\\n                                <p><code>{{lg}}</code></p>\\r\\n                            </ng-container>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Loại nguồn:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p><code>{{job.SOURCE_TYPE}}</code></p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\" *ngIf=\\\"job.SOURCE_TYPE == 'Excel'\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>File excel:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p><a href=\\\"{{job.FILE_EXCEL}}\\\">{{job.FILE_EXCEL}}</a></p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\" *ngIf=\\\"job.SOURCE_TYPE == 'Sql'\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>SQL:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.SQL}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\" *ngIf=\\\"job.SOURCE_TYPE == 'Textarea'\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Textarea:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7 div-textarea\\\">\\r\\n                            <p><code>{{job.TEXTAREA}}</code></p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Nhóm Job:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.GROUP}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Giới hạn dữ liệu chạy batch:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.BATCH_LIMIT}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Giới hạn đồng bộ trong batch:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.MULTI_LIMIT}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Thời gian bắt đầu chạy JOB:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.START_TIME}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Thời gian kết thúc:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.FINISH_TIME}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Trạng thái hiện tại:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p><code>{{job.STATUS}}</code></p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Ưu tiên:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.PRIORITY}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Thời gian tạo Job:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.CREATED_TIME}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Người tạo:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.CREATED_BY}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Thời gian cập nhật cuối:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.MODIFIED_TIME}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-5-ipad cbs_style_label col-xs-12 col-lg-5\\\">\\r\\n                            <label>Người cập nhật:</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-7-ipad value col-xs-12 col-lg-7\\\">\\r\\n                            <p>{{job.MODIFIED_BY}}</p>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <hr />\\r\\n                    <div class=\\\"row\\\" *ngIf=\\\"result.data\\\">\\r\\n                        <div class=\\\"col-12-ipad cbs_style_label col-xs-12 col-lg-12\\\">\\r\\n                            <h2>Tổng hợp kết quả chạy Job:</h2>\\r\\n                        </div>\\r\\n                        <table class=\\\"table\\\">\\r\\n                            <thead>\\r\\n                                <tr>\\r\\n                                    <th>NAME</th>\\r\\n                                    <th>NOT_RUNNING</th>\\r\\n                                    <th>ERROR</th>\\r\\n                                    <th>VALID</th>\\r\\n                                    <th>TOTAL</th>\\r\\n                                </tr>\\r\\n                            </thead>\\r\\n                            <tbody>\\r\\n                                <ng-container *ngFor=\\\"let r of result.data\\\">\\r\\n                                    <tr>\\r\\n                                        <td>{{r.NAME}}</td>\\r\\n                                        <td>{{r.NOT_RUNNING}}</td>\\r\\n                                        <td>{{r.ERROR}}</td>\\r\\n                                        <td>{{r.VALID}}</td>\\r\\n                                        <td>{{r.TOTAL}}</td>\\r\\n                                    </tr>\\r\\n                                </ng-container>\\r\\n                            </tbody>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"admin-table-to-form col-6-ipad cbs_style_label col-xs-6 col-lg-6\\\" *ngIf=\\\"log\\\"\\r\\n                    style=\\\"overflow:scroll\\\">\\r\\n                    <div class=\\\"row\\\" style=\\\"height:800px\\\">\\r\\n                        <table class=\\\"table table_\\\">\\r\\n                            <thead>\\r\\n                                <tr>\\r\\n                                    <th>ID</th>\\r\\n                                    <th>Hành động</th>\\r\\n                                    <th>Nội dung Log</th>\\r\\n                                    <th>Thời gian tạo</th>\\r\\n                                </tr>\\r\\n                            </thead>\\r\\n                            <tbody>\\r\\n                                <ng-container *ngFor=\\\"let lg of log.list\\\">\\r\\n                                    <tr>\\r\\n                                        <td>#{{lg.ID}}</td>\\r\\n                                        <td><code style=\\\"background-color: #00841c;\\\">{{lg.ACTION}}</code></td>\\r\\n                                        <td>{{lg.MESSAGE}}</td>\\r\\n                                        <td style=\\\"color:rgb(115, 255, 97) !important\\\">{{lg.CREATED_TIME}}</td>\\r\\n                                    </tr>\\r\\n                                </ng-container>\\r\\n                            </tbody>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n<simple-notifications [options]=\\\"notifications_options\\\"></simple-notifications>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/project/crawlersystem/src/app/application/admin/job/job.component.html\n// module id = ../../../../../src/app/application/admin/job/job.component.html\n// module chunks = job.module","import { Component, ViewEncapsulation, AfterViewInit, Input, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router, UrlSegment, UrlTree, PRIMARY_OUTLET, UrlSegmentGroup } from '@angular/router';\r\n\r\nimport { GlobalFunction } from '../../../common/core/global_function';\r\nimport { JobService } from '../models/job.service';\r\nimport { LogService } from '../models/log.service';\r\n\r\n@Component({\r\n  selector: 'job',\r\n  templateUrl: './job.component.html',\r\n})\r\n\r\nexport class JobComponent {\r\n\r\n\r\n  job: any = {};\r\n  log: any = {};\r\n  result: any = {};\r\n  showChecked: boolean = false;\r\n  notifications_options: any = {\r\n      timeOut: 3000,\r\n      showProgressBar: false,\r\n      pauseOnHover: true,\r\n      clickToClose: true\r\n  };\r\n\r\n\r\n  constructor(private route: ActivatedRoute,\r\n    private router: Router,\r\n    public jobservice: JobService,\r\n    public logservice: LogService) {\r\n  }\r\n  ngOnInit() {\r\n    this.run();\r\n  }\r\n  ngAfterViewInit() {\r\n  }\r\n  role(action) {\r\n    return GlobalFunction.ROLE[action] ? true : false;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub.unsubscribe();\r\n    clearInterval(this.clr);\r\n  }\r\n  sub: any = false;\r\n\r\n  clr: any = false;\r\n\r\n  run(){\r\n    var that = this;\r\n    this.sub = this.route.params.subscribe(async function(params) {\r\n      const jobId = params['id'];\r\n      that.jobservice.findOne(jobId).then(r => {\r\n        that.job = that.jobservice.showAttributes();\r\n      });\r\n      \r\n      that.logservice.findAll({JOB_ID:jobId,order_by: 'ID desc'}).then(r => {\r\n        that.log = r;\r\n      })\r\n      that.jobservice.get(jobId).then(r => {\r\n        that.result = r;\r\n      })\r\n      that.clr = setTimeout(function(){\r\n        that.run();\r\n      },10000);\r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// C:/project/crawlersystem/src/app/application/admin/job/job.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HttpModule } from '@angular/http';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { SimpleNotificationsModule, NotificationsService } from 'angular4-notifications';\r\nimport { LoadingModule } from 'ngx-loading';\r\n\r\n\r\nimport { TableModule } from '../../../common/component/table/table.module';\r\nimport { PopupModule } from 'app/common/component/popup/popup.module';\r\nimport { FieldAdminModule } from 'app/application/admin/fields/fields.module';\r\nimport { UserService } from 'app/common/services/user.service';\r\nimport { JobComponent } from 'app/application/admin/job/job.component';\r\nimport { JobService } from '../models/job.service';\r\nimport { LogService } from '../models/log.service';\r\n\r\n@NgModule({\r\n  imports: [\r\n    HttpModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    CommonModule,\r\n    FieldAdminModule,\r\n    PopupModule,\r\n    LoadingModule,\r\n    SimpleNotificationsModule.forRoot(),\r\n    RouterModule.forChild([\r\n      {\r\n          path: '',\r\n          component: JobComponent\r\n      },\r\n      {\r\n          path: 'view',\r\n          component: JobComponent\r\n      },\r\n    ]),\r\n    TableModule,\r\n  ],\r\n  declarations: [\r\n    JobComponent,\r\n  ],\r\n  providers: [NotificationsService, UserService, JobService, LogService],\r\n})\r\n\r\nexport class JobModule { }\n\n\n// WEBPACK FOOTER //\n// C:/project/crawlersystem/src/app/application/admin/job/job.module.ts"],"sourceRoot":"webpack:///"}